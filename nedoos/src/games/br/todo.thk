

The game Black Raven (Чёрный Ворон) by Vyacheslav Mednonogov (1997) is dedicated for Russian clones of ZX Spectrum 128K with Beta 128 disk interface, such as Pentagon 128 and Scorpion 256K. It was released on two protected floppy disks and required an extra disk for saving states. The colourized hard drive compatible version requires ATM-Turbo 2 clone or higher: http://nedoos.ru/
This is a Warcraft-like game in medieval Russian setting.
The game was a commercial product. Later the author made the game freeware and released the source codes.
The game had a cult following, with mission editors and extra missions by other authors.
The sequel named Black Raven 2 (set in the future) has not been finished, its sources are also available.


отвязаться от pg7 и убрать задержку в начале

не обновлять палитру, если она не изменилась, а то полоски

[убрать патч музыки, если нет музыки, чтобы не запарывалось демо? или и так норм?]
[при старте 1 уровня при показе задания стрелочка раздваивается (если без мышки)?]
[один раз в деме противники застряли в толпе друг друга и перестали биться - это возможно и в оригинале?]
при старте непервого уровня не показывается задание - и не должно?


при старте уровня хрюкает музыка?
при включении карты тормозит музыка?


если выбрать отряд и в режиме карты нажать G, а потом выйти из карты, то отряд не работает (так и было?)

+-сделать автосборку всех уровней (упаковку убрать?), сейчас только для бывших защищённых уровней

шрифт сейчас не конвертируется с картинки?

сделать описание (можно отдельно, но где текст?)


англ версию (для этого надо переделать конверторы текстов, тасков и тексты в wlib1a, перерисовать надписи и шрифт)




подсветку текущей команды (кнопка)
FIRBUT	;обработка нажатия иконки + подсветка
sqrCOL	;закрасить квадр. c HL цветом A



в сетупе: не видно воду




у кунгов была голубая панель и рисунки кнопок на ней! но это не соответствует их красному щиту (взятому с картинки Баркова)
Можно объяснить голубой (металлической) окантовкой этого щита.



сделать шире энергию, ману (сейчас там 1 байт ширина)

;курсор скролла?
BL_ONN	EXX

+-ATRBAR - пока убрано
+-sqrCOL	;закрасить квадр. c HL цветом A - пока убрал






<108:
порядок тайлов на домике 3x3 такой - от центра влево и по часовой стрелке:
193,194,195
192, 86,196
199,198,197      
>=108:
порядок тайлов на домике 2x2 такой:
369,370
368,108


  //86,88,91,87, 110,112,255,
  //92,90,89,78,107, 255,
  //103,106,101,100,104, 255,
  //105,102,93, 0
193,194,195, 209,210,211, 233,234,235, 201,202,203, 375,376, 381,382,
192, 86,196, 208, 88,212, 232, 91,236, 200, 87,204, 374,110, 380,112,
199,198,197, 215,214,213, 239,238,237, 207,206,205,  -1, -1,  -1, -1,

241,242,243, 225,226,227, 217,218,219, 129,130,131, 361,362,363,  -1,
240, 92,244, 224, 90,228, 216, 89,220, 128, 78,132, 360,107,364,  -1,      
247,246,245, 231,230,229, 223,222,221, 135,134,133, 367,366,365,  -1,      

329,330,331, 353,354,355, 313,314,315, 305,306,307, 337,338,339,  -1,
328,103,332, 352,106,356, 312,101,316, 304,100,308, 336,104,340,  -1,
335,334,333, 359,358,357, 319,318,317, 311,310,309, 343,342,341,  -1,

345,346,347, 321,322,323, 249,250,251,  -1, -1, -1,  -1, -1, -1,  -1,
344,105,348, 320,102,324, 248, 93,252,  -1, -1, -1,  -1, -1, -1,  -1,
351,350,349, 327,326,325, 255,254,253,  -1, -1, -1,  -1, -1, -1,  -1,
                                                                     
  //-1,81,84,80, 109,111,255,
  //85,83,82, 255,
  //96,99,94,-1,97, 255,
  //98,95,-1,79, 108, 0
 -1, -1, -1, 153,154,155, 177,178,179, 145,146,147, 372,373, 378,379,
 -1, -1, -1, 152, 81,156, 176, 84,180, 144, 80,148, 371,109, 377,111,
 -1, -1, -1, 159,158,157, 183,182,181, 151,150,149,  -1, -1,  -1, -1,

185,186,187, 169,170,171, 161,162,163,  -1, -1, -1,  -1, -1, -1,  -1, 
184, 85,188, 168, 83,172, 160, 82,164,  -1, -1, -1,  -1, -1, -1,  -1, 
191,190,189, 175,174,173, 167,166,165,  -1, -1, -1,  -1, -1, -1,  -1, 

273,274,275, 297,298,299, 257,258,259,  -1, -1, -1, 281,282,283,  -1,
272, 96,276, 296, 99,300, 256, 94,260,  -1, -1, -1, 280, 97,284,  -1,
279,278,277, 303,302,301, 263,262,261,  -1, -1, -1, 287,286,285,  -1,

289,290,291, 265,266,267,  -1, -1, -1, 137,138,139, 369,370, -1,  -1,
288, 98,292, 264, 95,268,  -1, -1, -1, 136, 79,140, 368,108, -1,  -1,
295,294,293, 271,270,269,  -1, -1, -1, 143,142,141,  -1, -1, -1,  -1,
                                                  

[после хранения в R128 неперекодированной паги стало иногда виснуть в деме - отменил]
  